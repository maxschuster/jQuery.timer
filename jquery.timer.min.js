/*
 * Copyright 2012 Max Schuster 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 */
(function(c,f){var g=function(){return this.each(function(){var b=c(this),a=b.data("timer");c.extend(a,{currentCount:a.currentCount+1});c(this).data("timer",a);0!==a.settings.repeatCount&&a.currentCount>=a.settings.repeatCount?(b.timer("stop",!1),b.trigger("complete.timer",{delay:a.settings.delay,repeatCount:a.settings.repeatCount,currentCount:a.currentCount,running:a.running})):b.trigger("tick.timer",{delay:a.settings.delay,repeatCount:a.settings.repeatCount,currentCount:a.currentCount,running:a.running})})},
e={init:function(b){return this.each(function(){var a=c(this),d=a.data("timer");d&&a.timer("destroy");d={currentCount:0,running:!1,interval:null,settings:{delay:1E3,repeatCount:1}};c.extend(d.settings,b);a.data("timer",d)})},destroy:function(){return this.each(function(){var b=c(this),a=b.data("timer");b.timer("stop",!1);b.trigger("destroy.timer",{delay:a.settings.delay,repeatCount:a.settings.repeatCount,currentCount:a.currentCount,running:a.running});b.off(".timer");b.removeData("timer")})},reset:function(){return this.each(function(){var b=
c(this),a=b.data("timer");b.timer("stop",!1);c.extend(a,{currentCount:0});c(this).data("timer",a);b.trigger("reset.timer",{delay:a.settings.delay,repeatCount:a.settings.repeatCount,currentCount:a.currentCount,running:a.running})})},start:function(){return this.each(function(){var b=c(this),a=b.data("timer");c.extend(a,{interval:setInterval(c.proxy(g,b),a.settings.delay),running:!0});c(this).data("timer",a);b.trigger("start.timer",{delay:a.settings.delay,repeatCount:a.settings.repeatCount,currentCount:a.currentCount,
running:a.running})})},stop:function(b){b===f&&(b=!0);return this.each(function(){var a=c(this),d=a.data("timer");clearInterval(d.interval);c.extend(d,{interval:null,running:!1});c(this).data("timer",d);!0===b&&a.trigger("stop.timer",{delay:d.settings.delay,repeatCount:d.settings.repeatCount,currentCount:d.currentCount,running:d.running})})}};c.fn.timer=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return e.init.apply(this,arguments);
c.error("Method "+b+" does not exist on jQuery.timer")}})(jQuery);