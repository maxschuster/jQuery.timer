/*
 * Copyright 2012 Max Schuster 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 */
(function(c,g){function e(a){return{delay:a.settings.delay,repeatCount:a.settings.repeatCount,currentCount:a.currentCount,running:a.running}}function h(){return this.each(function(){var a=c(this),b=a.data("timer");c.extend(b,{currentCount:b.currentCount+1});a.data("timer",b);0!==b.settings.repeatCount&&b.currentCount>=b.settings.repeatCount?(a.timer("stop",!1),a.trigger("complete.timer",e(b))):a.trigger("tick.timer",e(b))})}var f={init:function(a){return this.each(function(){var b=c(this),d=b.data("timer");
d&&b.timer("destroy");d={currentCount:0,running:!1,interval:null,settings:{delay:1E3,repeatCount:1,autoStart:!1}};c.extend(d.settings,a);b.data("timer",d);!0===d.settings.autoStart&&b.timer("start")})},destroy:function(){return this.each(function(){var a=c(this),b=a.data("timer");a.timer("stop",!1);a.trigger("destroy.timer",e(b));a.off(".timer");a.removeData("timer")})},reset:function(){return this.each(function(){var a=c(this),b=a.data("timer");a.timer("stop",!1);c.extend(b,{currentCount:0});a.data("timer",
b);a.trigger("reset.timer",e(b))})},start:function(){return this.each(function(){var a=c(this),b=a.data("timer");c.extend(b,{interval:setInterval(c.proxy(h,a),b.settings.delay),running:!0});a.data("timer",b);a.trigger("start.timer",e(b))})},stop:function(a){a===g&&(a=!0);return this.each(function(){var b=c(this),d=b.data("timer");clearInterval(d.interval);c.extend(d,{interval:null,running:!1});b.data("timer",d);!0===a&&b.trigger("stop.timer",e(d))})}};c.fn.timer=function(a){if(f[a])return f[a].apply(this,
Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return f.init.apply(this,arguments);c.error("Method "+a+" does not exist on jQuery.timer")}})(jQuery);